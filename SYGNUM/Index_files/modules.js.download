"use strict";angular.module("wix.common.bi",[]).factory("Logger",function(){return W.BI.Logger}).factory("DomEventHandler",function(){return W.BI.DomEventHandler}).run(["biBrowsingSession",function(a){a.track()}]);var W=W||{};W.BI=W.BI||{},W.BI.ErrorSeverity={RECOVERABLE:10,WARNING:20,ERROR:30,FATAL:40},W.BI.Categories={EDITOR:1,VIEWER:2,TIMEOUTS:3,SERVER:4},W.BI.initialLoadIsReported=!1,W.BI.Logger=function(){function a(){return(new Date).getTime()}function b(){return""+a()+f++}function c(){var a=window.performance&&window.performance.now?window.performance.now():-1;return Math.round(a)}function d(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];if(c)for(var d in c)a[d]=c[d]}return a}function e(a){function b(a,b){var c={src:{type:"number"},evid:{type:"number"}},e=d({},h,p.defaultEventArgs,a),f=p.schemaValidators||[],i=f.length>0?f.some(function(a){return a.match(e)&&(a.execute(e)||!0)}):!0;if(!i)throw new Error("No validator accepted the event");g(e,["evid"],c)&&o(e,b)}function c(a,b){var c=["evid","cat","iss","sev","errc","ver"],e={src:{type:"number"},evid:{type:"number",values:[k.ERROR]},cat:{type:"number",values:[W.BI.Categories.EDITOR,W.BI.Categories.VIEWER,W.BI.Categories.TIMEOUTS,W.BI.Categories.SERVER]},iss:{type:"number"},sev:{type:"number",values:[W.BI.ErrorSeverity.RECOVERABLE,W.BI.ErrorSeverity.WARNING,W.BI.ErrorSeverity.ERROR,W.BI.ErrorSeverity.FATAL]},errc:{type:"number"},httpc:{type:"number"},ver:{type:"string",maxLength:16},errscp:{type:"string",subStr:64},trgt:{type:"string",subStr:64},gsi:{type:"string",length:36},ts:{type:"number"},uid:{type:"number"},ut:{type:"string",maxLength:16},did:{type:"string",maxLength:36},cid:{type:"string",length:36},lng:{type:"string",maxLength:5},dsc:{type:"string",subStr:512}},f=d({},i,p.defaultErrorArgs,a,{evid:k.ERROR});g(f,c,e)&&o(f,b)}function e(a,c,e){var f={view:{type:"string"}},h=d({},c,{evid:k.ON_READY,view:a});g(h,["view"],f)&&b(h,e)}function f(a,c,e){var f={view:{type:"string"}},h=d({},c,{evid:k.ROUTE_CHANGE,view:a});g(h,["view"],f)&&b(h,e)}function g(a,b,c){var d=b.slice(0);for(var e in a){var f=c[e]||{};if(a[e]=r.parse(a[e],f),!r.valid(a[e],f))return void p.error("Bad event param (key: "+e+", value: "+a[e]+")");var g;(g=d.indexOf(e))>-1&&d.splice(g,1)}return d.length>0?(p.error("Missing required params: "+d.join(", ")),!1):!0}function l(a,b){var c=a.match(/\?./)?"&":"?";return a.replace(/\?$/,"")+c+Object.keys(b).filter(function(a){return!p.removeUndefinedValues||void 0!==b[a]}).map(function(a){return[encodeURIComponent(a),"=",encodeURIComponent(b[a])].join("")}).join("&")}function m(a,b,c){var d=function(){c("pixel")},e=b||new Image(0,0);e.onload=d,e.onerror=d,e.src=a}function n(a,b){return window.navigator&&window.navigator.sendBeacon?window.navigator.sendBeacon(a)&&setTimeout(function(){b("beacon")},0):!1}function o(a,b){var c=a.adapter||p.adapter;delete a.adapter;var d=l(p.biUrl+c,a),e=b||function(){};W.BI.DryRun?setTimeout(e,0):p.useBeacon&&n(d,e)||m(d,p.image,e),q.url=d,q.callback=b}var p,q={url:void 0,assertEmpty:function(){if(void 0!==this.url)throw"last bi is not empty!!!"},resolve:function(){this.callback()},clear:function(){this.url=void 0}},r=new W.BI.FieldParsers(a.injector);return a.hostName&&(a.biUrl="//"+a.hostName+"/"),p=d({},j,a),{log:b,reportOnReady:e,reportRouteChange:f,error:c,getLastBiUrl:function(){return q}}}var f=0,g=a(),h={_:b,ms:c},i={_:b,ts:function(){return a()-g},cat:W.BI.Categories.VIEWER,sev:W.BI.ErrorSeverity.WARNING,iss:1,ver:"1"},j={hostName:"frog.wix.com",defaultEventArgs:{},defaultErrorArgs:{},biUrl:"//frog.wix.com/",schemaValidators:[],adapter:"",error:function(a){throw a}},k={ERROR:10,ON_READY:302,ROUTE_CHANGE:300};return e}();var W=W||{};W.BI=W.BI||{},W.BI.DomEventHandler=function(){function _extend(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];if(c)for(var d in c)a[d]=c[d]}return a}function eventHandler(biLogger,args){function _safeGetEventParams(a,b,c){var d;return b&&b[a]?d=b[a]:(_options.error("Invalid event name"),d={}),_extend({},d,c)}function _log(a,b,c){var d=_safeGetEventParams(a,_options.eventMap,b);_biLogger.log(d,c)}function _error(a,b,c){var d=_safeGetEventParams(a,_options.errorMap,b);_biLogger.error(d,c)}function _getAttr(a,b){for(var c=0;c<a.attributes.length;c++)if(a.attributes[c].name===b)return a.attributes[c].value}function _handleTriggeredBiEvent(event){var eventName=_getAttr(event.target,_wixBiAttributeSelector);if(eventName){var eventArgsStr=_getAttr(event.target,_wixBiArgsAttribute),eventArgs=eventArgsStr?eval("eventArgs = "+eventArgsStr):{};_log(eventName,eventArgs)}}function _bind(){document.body.addEventListener("click",_handleTriggeredBiEvent)}function _unbind(){document.body.removeEventListener("click",_handleTriggeredBiEvent)}var _options,_biLogger=biLogger;return _options=_extend({},_initOptions,args),{bind:_bind,unbind:_unbind,log:_log,error:_error}}var _wixBiAttributeSelector="wix-bi",_wixBiArgsAttribute="wix-bi-args",_initOptions={eventMap:{},errorMap:{},error:function(a){throw a}};return eventHandler}();var W=W||{};W.BI=W.BI||{},W.BI.FieldParsers=function(a){var b={length:function(a,b){return a&&void 0!==a.length&&a.length===b},maxLength:function(a,b){return a&&void 0!==a.length&&a.length<=b},values:function(a,b){return b&&-1!==b.indexOf(a)},type:function(a,b){return a&&typeof a===b}},c={subStr:function(a,b){return a&&a.substr?a.substr(0,Math.min(a.length,b)):a}};this.valid=function(a,c){for(var d in c)if(b[d]&&!b[d](a,c[d]))return!1;return!0},this.parse=function(b,d){"function"==typeof b&&(b=a?a.invoke(b):b());for(var e in d)b=c[e]?c[e](b,d[e]):b;return b}},angular.module("wix.common.bi").directive("wixBi",["domBiLogger","$window",function(a,b){function c(a){return a.replace(/-/g,"_").toUpperCase()}return{restrict:"A",priority:1,link:{pre:function(d,e,f){var g=f.wixBiEvent||"click";e.bind(g,function(e){var h=c(f.wixBi),i=d.$eval(f.wixBiArgs)||{};if("click"===g&&e.target.href&&void 0!==f.delayHref){var j=e.target.href;e.preventDefault(),a.log(h,i,function(){b.location=j})}else a.log(h,i)})}}}}]),angular.module("wix.common.bi").provider("biLogger",["recursiveExtend",function(a){var b={eventMap:{}};this.setConfig=function(c){a(b,c)},this.$get=["Logger","$injector",function(a,c){function d(){var a={};return a.ownerId=function(a){return a.$$getOwnerId()},a.ownerId.$inject=["permissionsManager"],a.roles=function(a){return a.$$getRoles().join(",")},a.roles.$inject=["permissionsManager"],a}if(b.injector=c,c.has("permissionsManager")){var e=d();b.defaultEventArgs=angular.extend({},b.defaultEventArgs,e),b.defaultErrorArgs=angular.extend({},b.defaultErrorArgs,e)}return angular.extend(new a(b),{getConfig:function(){return b}})}],this.$get.$inject=["Logger","$injector"]}]),angular.module("wix.common.bi").provider("domBiLogger",["recursiveExtend",function(a){var b={eventMap:{}};this.setConfig=function(c){a(b,c)},this.$get=["biLogger","DomEventHandler",function(a,c){return angular.extend(new c(a,b),{getConfig:function(){return b}})}],this.$get.$inject=["biLogger","DomEventHandler"]}]),angular.module("wix.common.bi").constant("recursiveExtend",function(){function a(a){return null!==a&&"object"==typeof a&&a.constructor!==Array}function b(c,d){for(var e in d)d.hasOwnProperty(e)&&(a(d[e])?(c[e]=c[e]||{},b(c[e],d[e])):c[e]=d[e])}return b}()),function(){function a(a){if("undefined"!=typeof window&&window)try{return window.top===window.self?a?a(window):window:null}catch(b){return null}return null}function b(a,b,c){if(a&&a[b]){var d=a[b];a[b]=function(){return c.apply(null,arguments),d.apply(a,arguments)}}}function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}angular.module("wix.common.bi").provider("biBrowsingSession",function(){var d,e="__isTrackingBiBrowsingSession__",f="p",g=19,h=3;this.setHost=function(a){d=a},this.$get=["$window","Logger",function(i,j){function k(b){a(function(a){b(a.location.href)})}function l(c){a(function(a){["pushState","replaceState"].forEach(function(d){b(a.history,d,function(a,b,d){c(d)})})})}function m(b){a(function(a){a.addEventListener("popstate",function(){b(a.location.href)})})}function n(a){var b="";[k,l,m].forEach(function(c){c(function(c){a(b,c),b=c})})}function o(){return a(function(a){return a&&!a[e]})}function p(){a(function(a){a[e]=!0})}function q(){o()&&(p(),n(function(a,b){r.log({from:a,to:b})}))}var r=new j({hostName:d,adapter:f,useBeacon:!0,defaultEventArgs:{src:g,evid:h,vsi:c()}});return{track:q,logger:r}}],this.$get.$inject=["$window","Logger"]})}(),angular.module("wix.common.bi").value("nowWrapper",function(){return Date.now()}).provider("wixBiLogger",["biLoggerProvider","domBiLoggerProvider","biBrowsingSessionProvider",function(a,b,c){this.setConfig=function(d){a.setConfig(d),b.setConfig(d),c.setHost(d.hostName)},this.$get=["biLogger","domBiLogger","$q","$rootScope","$window","$parse","nowWrapper",function(a,b,c,d,e,f,g){function h(a){return function(){d.$$phase?a.resolve():d.$apply(function(){a.resolve()})}}function i(a){return Object.keys(k[a]||[]).reduce(function(a,b){return a[b]=b,a},{})}function j(){return"undefined"!=typeof e.NREUM}var k=angular.extend({},a.getConfig(),b.getConfig());return{log:function(d,e){var f=c.defer();return"string"!=typeof d&&d?a.log(d,h(f)):b.log(d,e,h(f)),f.promise},error:function(d,e){var f=c.defer();return"string"==typeof d?b.error(d,e,h(f)):a.error(d,h(f)),f.promise},reportOnReady:function(b,d){var i=c.defer();if(!W.BI.initialLoadIsReported){j()&&e.NREUM.finished(),void 0===d&&(d={});var k=f("performance.timing.navigationStart")(e);k&&(d.loading_time=g()-k),d.initial_load=!0,W.BI.initialLoadIsReported=!0}return a.reportOnReady(b,d,h(i)),i.promise},reportRouteChange:function(b,d){var e=c.defer();return a.reportRouteChange(b,d,h(e)),e.promise},getLastBiUrl:function(){return a.getLastBiUrl()},events:i("eventMap"),errors:i("errorMap"),getConfig:function(){return angular.extend({},a.getConfig(),b.getConfig())}}}],this.$get.$inject=["biLogger","domBiLogger","$q","$rootScope","$window","$parse","nowWrapper"]}]),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define("fedops-logger",[],b):"object"==typeof exports?exports["fedops-logger"]=b():a["fedops-logger"]=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};if(b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b.p="undefined"!=typeof window&&window.__STATICS_BASE_URL__||b.p,"undefined"!=typeof document){var d=document.getElementById("fedops-logger-angular.stylable.bundle.css");d||(d=document.createElement("style"),d.id="fedops-logger-angular.stylable.bundle.css",document.head.appendChild(d)),d.textContent=""}return b(b.s=29)}([function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=c(2),i=d(h),j=function(a){function b(a,c){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,{src:72,evid:a,session_id:c,_:(new Date).getTime()}))}return g(b,a),b}(i["default"]);b["default"]=j},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(8),f=d(e);b["default"]={getNavigation:function(){return window&&window.performance?window.performance.navigation:{}},getResources:function(){var a=[];try{return window&&window.performance&&window.performance.getEntriesByType&&window.performance.getEntriesByType("resource")||a}catch(b){return a}},getTiming:function(){return window&&window.performance?window.performance.timing:{}},now:function(){return window&&window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},mark:function(a){f["default"].isFedopsDev()&&window&&window.performance&&window.performance.mark&&window.performance.mark(a)},measure:function(a,b,c){f["default"].isFedopsDev()&&window&&window.performance&&window.performance.measure&&window.performance.measure(a,b,c)}}},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;d(this,a),this.data=b}return e(a,[{key:"isActive",value:function(){return!0}},{key:"export",value:function(){return this.data}}]),a}();b["default"]=f},function(a,b,c){function d(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"="+encodeURIComponent(a[c]));return b.join("&")}function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]={mapToQuery:d,generateGuid:e}},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(16),h=d(g),i=c(17),j=d(i),k=c(5),l=d(k),m=c(9),n=d(m),o=c(1),p=d(o),q=c(18),r=d(q),s=function(){function a(b,c,d,f){var g=f.sessionId,i=f.errorHandlerToggle,j=f.disableAutoLoadFinish;e(this,a),this.appName=b,this.appVersion=c,this.reporter=d,this.params={sessionId:g},this.errorHandlerToggle=i,this.disableAutoLoadFinish=j,this.dataSource=new h["default"]({appName:b}),i&&window.fedopsLoggerErrorHandler.subscribeListener(b,this.reportError.bind(this))}return f(a,[{key:"reportNetworkAnalysis",value:function(){var a=this,b=p["default"].getResources();setTimeout(function(){try{var c=new r["default"](a.sessionId),d=c.performNetworkAnalysis(b);if(!d)return;var e=a.dataSource.clone().addItem(c).addItem(d);console.debug&&console.debug(JSON.stringify(d,null,4)),a._report(e)}catch(f){console.error("[fedops] Failed to report resource metrics",f)}},1e3)}},{key:"reportError",value:function(a,b,c){var d=void 0;d=this._appLoadedCalled?Object.keys(this._outgoingInteractions)[0]:"[APP LOAD]";var e=this.dataSource.clone().addItem({interactionName:d}).addItem({errorType:b}).addItem({errorInfo:c}).addItem(new n["default"](this.sessionId));d&&this._report(e)}},{key:"_report",value:function(a){return this.reporter.report(a.mergeItems())}},{key:"getAppName",value:function(){return this.appName}},{key:"getAppVersion",value:function(){return this.appVersion}},{key:"getReporter",value:function(){return this.reporter}},{key:"getParam",value:function(a){return this.params[a]}},{key:"_isDisableAutoLoadFinish",value:function(){return this.disableAutoLoadFinish}},{key:"appLoadingPhase",value:function(a){var b=this.dataSource.clone().addItem({name:a}).addItem(new j["default"](this.sessionId)).addItem(new l["default"]);return this._report(b)}},{key:"sessionId",get:function(){return this.getParam("sessionId")}}]),a}();b["default"]=s},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(6),j=d(i),k=c(2),l=d(k),m=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,{duration:Math.floor(j["default"].appLoadTime(a))}));return c.appName=a,c}return g(b,a),h(b,[{key:"setFirstRequestDuration",value:function(){return this.data.frd=Math.floor(j["default"].firstRequestDuration(this.appName)),this}}]),b}(l["default"]);b["default"]=m},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return h["default"].getStartLoadTime(a)||0}function f(){return j["default"].now()}Object.defineProperty(b,"__esModule",{value:!0});var g=c(7),h=d(g),i=c(1),j=d(i);b["default"]={appLoadTime:function(a){return f()-e(a)},loadStarted:function(a){h["default"].setStartLoadTime(a,j["default"].now())},firstRequestDuration:function(a){return e(a)}}},function(a,b,c){function d(a){return window.fedops.apps[a]}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]={init:function(a){window.fedops.apps[a]=window.fedops.apps[a]||{}},getStartLoadTime:function(a){var b=d(a);return b?b.startLoadTime:null},setStartLoadTime:function(a,b){return d(a).startLoadTime=b}}},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=function(){return"undefined"!=typeof window&&window.location};b["default"]={getHost:function(){return d()&&window.location.host},isFedopsDev:function(){var a=(d()||{}).search||"";return a.indexOf("fedops=dev")>-1}}},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0}),b.EVID=void 0;var h=c(0),i=d(h),j=b.EVID=17,k=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,j,a))}return g(b,a),b}(i["default"]);b["default"]=k},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=b.baseUrl,d=void 0===c?null:c,e=b.appId,f=void 0===e?null:e,h=b.isWidgetLogger,i=void 0===h?!1:h,j=b.errorHandlerToggle,k=void 0===j?!1:j,l=b.disableAutoLoadFinish,m=void 0===l?!1:l,n=b.swallowExceptions,o=void 0===n?!1:n,p=b.interactionTimeout,q=void 0===p?null:p,r=b.timeoutHook,s=void 0===r?null:r,t=b.startHook,u=void 0===t?null:t,v=b.endHook,w=void 0===v?null:v,x=b.networkAnalysis,y=void 0===x?!1:x,z="undefined"!=typeof window?"1.0.0-SNAPSHOT":null;return(new g["default"]).setAppName(a).setAppVersion(z).setBaseUrl(d).setAppId(f).setErrorHandlerToggle(k).setSwallowExceptions(o).setWidgetLogger(i).setInteractionTimeout(q).setTimeoutHook(s).setStartHook(u).setEndHook(w).setDisableAutoLoadFinish(m).setNetworkAnalysis(y).build()}Object.defineProperty(b,"__esModule",{value:!0}),b.create=e;var f=c(11),g=d(f)},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(){var a="undefined"!=typeof window&&window.fedops&&window.fedops.sessionId;return a=a||l["default"].getItem(u.SESSION_ID_STORAGE_KEY),a=a||j["default"].generateGuid(),l["default"].setItem(u.SESSION_ID_STORAGE_KEY,a),a}function g(a){v=a}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();b.setFactory=g;var i=c(3),j=d(i),k=c(12),l=d(k),m=c(13),n=d(m),o=c(15),p=d(o),q=c(22),r=d(q),s=c(24),t=d(s),u=c(26),v=n["default"],w=function(){function a(){e(this,a)}return h(a,[{key:"setAppName",value:function(a){return this.appName=a,this}},{key:"setAppVersion",value:function(a){return this.appVersion=a,this}},{key:"setErrorHandlerToggle",value:function(a){return this.errorHandlerToggle=a,this}},{key:"setSwallowExceptions",value:function(a){return this.swallowExceptions=a,this}},{key:"setAppId",value:function(a){return this.appId=a,this}},{key:"setBaseUrl",value:function(a){return this.baseUrl=a,this}},{key:"setWidgetLogger",value:function(a){return this.isWidgetLogger=a,this}},{key:"setInteractionTimeout",value:function(a){return this.interactionTimeout=a,this}},{key:"setTimeoutHook",value:function(a){return this.timeoutHook=a,this}},{key:"setStartHook",value:function(a){return this.startHook=a,this}},{key:"setEndHook",value:function(a){return this.endHook=a,this}},{key:"setDisableAutoLoadFinish",value:function(a){return this.disableAutoLoadFinish=a,this}},{key:"setNetworkAnalysis",value:function(){return this}},{key:"build",value:function(){if(!this.appName)return null;this.appVersion||(this.appVersion=u.DEFAULT_APP_VERSION);var a=new v(this.baseUrl||u.BI_BASE_URL),b=this.errorHandlerToggle,c=this.swallowExceptions,d=this.interactionTimeout,e=this.timeoutHook,g=this.startHook,h=this.endHook,i=this.disableAutoLoadFinish;b&&(window.fedopsLoggerErrorHandler=window.fedopsLoggerErrorHandler||new t["default"]({swallowExceptions:c}));var j=null;return j=this.isWidgetLogger?new r["default"](this.appName,this.appVersion,a,{sessionId:f(),errorHandlerToggle:b,swallowExceptions:c,disableAutoLoadFinish:i}):new p["default"](this.appName,this.appVersion,a,{sessionId:f(),errorHandlerToggle:b,swallowExceptions:c,disableAutoLoadFinish:i,interactionTimeout:d,timeoutHook:e,startHook:g,endHook:h})}}]),a}();b["default"]=w},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0}),b["default"]={getItem:function(a){try{return window.localStorage.getItem(a)}catch(b){}},setItem:function(a,b){try{return window.localStorage.setItem(a,b)}catch(c){}}}},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(14),h=d(g),i=c(3),j=d(i),k=function(){function a(b){e(this,a),this.baseUrl=b}return f(a,[{key:"getBaseUrl",value:function(){return this.baseUrl}},{key:"report",value:function(a){return a?h["default"].fetch(this.baseUrl+"?"+j["default"].mapToQuery(a)):null}}]),a}();b["default"]=k},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0}),b["default"]={fetch:function(a){return(new window.Image).src=a}}},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(4),j=d(i),k=c(19),l=d(k),m=c(5),n=d(m),o=c(20),p=d(o),q=c(21),r=d(q),s=c(9),t=d(s),u=c(1),v=d(u),w=function(a,b){return a?a(b):void 0},x=function(a){function b(a,c,d,g){var h=g.sessionId,i=g.errorHandlerToggle,j=g.disableAutoLoadFinish,k=g.interactionTimeout,l=g.timeoutHook,m=g.startHook,n=g.endHook;e(this,b);var o=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c,d,{sessionId:h,errorHandlerToggle:i,disableAutoLoadFinish:j}));return o._outgoingInteractions={},o.interactionTimeout=k,o.timeoutHook=l,o.startHook=m,o.endHook=n,o}return g(b,a),h(b,[{key:"appLoaded",value:function(){if(!this._appLoadedCalled){window&&window.fedops&&"function"==typeof window.fedops.clearLoadTimeout&&window.fedops.clearLoadTimeout();var a=this.dataSource.clone().addItem(new l["default"](this.sessionId)).addItem(new n["default"](this.appName).setFirstRequestDuration());return this._appLoadedCalled=!0,v["default"].mark("[fedops] app-loaded"),v["default"].measure("[fedops] app-loaded","navigationStart","[fedops] app-loaded"),this.reportNetworkAnalysis(),this._report(a)}}},{key:"interactionStarted",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.interactionTimeout,e=c.startHook,f=c.timeoutHook;v["default"].mark(a+" started");var g=function(){return d||b.interactionTimeout?setTimeout(function(){var c=b.dataSource.clone().addItem({interactionName:a}).addItem({errorType:"timeout"}).addItem(new t["default"](b.sessionId));b._report(c),w(f||b.timeoutHook,{name:a,timeout:d||b.interactionTimeout})},d||b.interactionTimeout):void 0},h=this.dataSource.clone().addItem({name:a}).addItem(new p["default"](this.sessionId));this._outgoingInteractions[a]={timestamp:v["default"].now(),timeout:d||this.interactionTimeout},this._report(h),w(e||this.startHook,{name:a});var i=g();return{timeoutId:i}}},{key:"interactionEnded",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=b.timeoutId,d=b.endHook;v["default"].mark(a+" ended"),v["default"].measure(a+" duration",a+" started",a+" ended"),c&&clearTimeout(c);var e=this._outgoingInteractions[a]?Math.floor(v["default"].now()-this._outgoingInteractions[a].timestamp):"";w(d||this.endHook,{name:a,duration:e,timeout:this._outgoingInteractions[a]&&this._outgoingInteractions[a].timeout});var f=this.dataSource.clone().addItem({name:a}).addItem({duration:e}).addItem(new r["default"](this.sessionId));delete this._outgoingInteractions[a],this._report(f)}},{key:"isDisableAutoLoadFinish",value:function(){return this._isDisableAutoLoadFinish()}}]),b}(j["default"]);b["default"]=x},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(2),h=d(g),i=function(){function a(){var b=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e(this,a),this.items=[],c&&("undefined"==typeof c.length?[c]:c).forEach(function(a){return b.addItem(a)})}return f(a,[{key:"clone",value:function(){return new a(this.items.slice())}},{key:"addItem",value:function(a){return this.items.push(a instanceof h["default"]?a:new h["default"](a)),this}},{key:"mergeItems",value:function(){for(var a={},b=0;b<this.items.length;b++){var c=this.items[b];if(!c.isActive()){a=null;break}var d=c["export"]();for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e])}return a}}]),a}();b["default"]=i},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=c(0),i=d(h),j=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,13,a))}return g(b,a),b}(i["default"]);b["default"]=j},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a){return a.reduce(function(a,b){return a+b.transferSize},0)}function i(a){if(0===a.length)return 0;var b=a.reduce(function(a,b){return A(b)>=A(a)?b:a});return A(b)}function j(a){if(0===a.length)return 0;var b={startTime:1/0,responseEnd:0};return a.forEach(function(a){b.startTime>a.startTime&&(b.startTime=a.startTime),b.responseEnd<a.responseEnd&&(b.responseEnd=a.responseEnd)}),b.responseEnd-b.startTime}function k(a){var b=a.length;if(0===b)return 0;var c=a.filter(n).length;return Math.round(c/b*100)}function l(a){if(0===a.length)return 0;var b=a.filter(function(a){return 0===a.transferSize});return Math.round(b.length/a.length*100)}function m(a){return!a.name.match(/http(s)?:\/\/frog.wix.com\//)}function n(a){return o(a.name)&&0===a.transferSize&&0===a.requestStart}function o(a){var b=v["default"].getHost();return b&&-1===a.indexOf(b)}function p(a){return Object.keys(a).reduce(function(b,c){var d=parseInt(a[c]);return isNaN(d)||"number"!=typeof d||(b[c]=d),b},{})}function q(a){var b=a.filter(function(a){return!n(a)});return Object.keys(y).reduce(function(c,d){var e=z(b,d),f=y[d];return c[f.count]=e.length,c[f.duration]=j(e),c[f.total]=h(e),c[f.unsupported]=k(z(a,d)),f.longest&&(c[f.longest]=i(e)),f.cached&&(c[f.cached]=l(e)),c},{})}Object.defineProperty(b,"__esModule",{value:!0});var r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=c(0),t=d(s),u=c(8),v=d(u),w=c(1),x=d(w),y={
xmlhttprequest:{count:"countXhr",unsupported:"unsprtXhr",duration:"timeXhr",total:"sizeXhr",longest:"longXhr"},script:{count:"countJs",unsupported:"unsprtJs",duration:"timeJs",total:"sizeJs",cached:"cachedJs"},link:{count:"countCss",unsupported:"unsprtCss",duration:"timeCss",total:"sizeCss",cached:"cachedCss"},img:{count:"countImg",unsupported:"unsprtImg",duration:"timeImg",total:"sizeImg",cached:"cachedImages"}},z=function(a,b){return a.filter(function(a){return b===a.initiatorType})},A=function(a){return a.responseEnd-a.startTime},B=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,18,a))}return g(b,a),r(b,[{key:"performNetworkAnalysis",value:function(a){if(0===a.length)return null;var b=x["default"].now(),c=a.filter(m),d=q(c);return d.overhead=x["default"].now()-b,p(d)}}]),b}(t["default"]);b["default"]=B},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=c(0),i=d(h),j=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,11,a))}return g(b,a),b}(i["default"]);b["default"]=j},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0}),b.INTERACTION_START_EVID=void 0;var h=c(0),i=d(h),j=b.INTERACTION_START_EVID=15,k=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,j,a))}return g(b,a),b}(i["default"]);b["default"]=k},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0}),b.INTERACTION_END_EVID=void 0;var h=c(0),i=d(h),j=b.INTERACTION_END_EVID=16,k=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,j,a))}return g(b,a),b}(i["default"]);b["default"]=k},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(4),j=d(i),k=c(23),l=d(k),m=c(6),n=d(m),o=c(7),p=d(o),q=function(a){function b(a,c,d,g){var h=g.sessionId,i=g.disableAutoLoadFinish;e(this,b);var j=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c,d,{sessionId:h,disableAutoLoadFinish:i}));return p["default"].init(j.appName),j}return g(b,a),h(b,[{key:"appLoadStarted",value:function(){n["default"].loadStarted(this.appName);var a=this.dataSource.clone().addItem(new l["default"](this.sessionId));return this._report(a)}},{key:"isDisableAutoLoadFinish",value:function(){return this._isDisableAutoLoadFinish()}}]),b}(j["default"]);b["default"]=q},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=c(0),i=d(h),j=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,14,a))}return g(b,a),b}(i["default"]);b["default"]=j},function(a,b,c){(function(a){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e="undefined"!=typeof window?window:"undefined"!=typeof a?a:"undefined"!=typeof self?self:{},f=function(){function a(b){var d=b.swallowExceptions;c(this,a),this.swallowExceptions=d,this.listeners={},this.instrumentAjax(),this.instrumentSetTimeout(),this.instrumentSetInterval(),this.instrumentAddEventListener(),this.instrumentFetch(),this.instrumentPromise(),this.instrumentGloballyUnhandledError()}return d(a,[{key:"subscribeListener",value:function(a,b){this.listeners[a]=b}},{key:"removeListener",value:function(a){delete this.listeners[a]}},{key:"instrumentAjax",value:function(){var a=this;if("XMLHttpRequest"in e){var b=XMLHttpRequest.prototype;this._wrap(b,"open",function(a){return function(b,c){return this.__fedops_xhr={method:b,url:c,status_code:null},a.apply(this,arguments)}},"xhr"),this._wrap(b,"send",function(b){return function(){function c(){if(1===d.readyState||4===d.readyState){try{d.__fedops_xhr.status_code=d.status}catch(b){}a._isErrorStatusCode(d.__fedops_xhr.status_code)&&a._reportError(d.__fedops_xhr,"xhr",d.__fedops_xhr.status_code)}}var d=this;return a._wrap(this,"onload",function(a){return function(){a&&a.apply(this,arguments)}},"xhr"),a._wrap(this,"onerror",function(a){return function(){a&&a.apply(this,arguments)}},"xhr"),a._wrap(this,"onprogress",function(a){return function(){a&&a.apply(this,arguments)}},"xhr"),"onreadystatechange"in d&&"function"==typeof d.onreadystatechange?a._wrap(d,"onreadystatechange",function(a){return function(){return c(),a.apply(this,arguments)}}):d.onreadystatechange=c,b.apply(this,arguments)}},"xhr")}}},{key:"instrumentSetTimeout",value:function(){var a=this;this._wrap(e,"setTimeout",function(b){return function(c){for(var d=arguments.length,e=Array(d>1?d-1:0),f=1;d>f;f++)e[f-1]=arguments[f];return b.call.apply(b,[this,a._wrapCallback(c,"setTimeout")].concat(e))}})}},{key:"instrumentSetInterval",value:function(){var a=this;this._wrap(e,"setInterval",function(b){return function(c){for(var d=arguments.length,e=Array(d>1?d-1:0),f=1;d>f;f++)e[f-1]=arguments[f];return b.call.apply(b,[this,a._wrapCallback(c,"setInterval")].concat(e))}})}},{key:"instrumentAddEventListener",value:function(){function a(a){var c=e[a]&&e[a].prototype;c&&Object.prototype.hasOwnProperty.call(c,"addEventListener")&&(b._wrap(c,"addEventListener",function(a){return function(c,d,e,f){var g=b._wrapCallback(d,"addEventListener");return d&&(d.__fedopsWrapper__=g),a.call(this,c,g,e,f)}}),b._wrap(c,"removeEventListener",function(a){return function(b,c,d,e){return c=c&&(c.__fedopsWrapper__||c),a.call(this,b,c,d,e)}}))}var b=this,c=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];c.forEach(function(b){return a(b)})}},{key:"instrumentRequestAnimationFrame",value:function(){}},{key:"instrumentFetch",value:function(){var a=this;this._wrap(e,"fetch",function(b){return function(c,d){return b.apply(this,arguments).then(function(b){var e=b.status;if(a._isErrorStatusCode(e)){var f={url:c,method:d?d.method:"GET",status_code:e};a._reportError(f,"fetch",e)}return b})}})}},{key:"instrumentPromise",value:function(){var a=this;e.addEventListener("unhandledrejection",function(b){a._reportError(b,"promise")})}},{key:"instrumentGloballyUnhandledError",value:function(){var a=this;e.addEventListener("error",function(b){a._reportError(b,"windowOnError")})}},{key:"instrumentHistory",value:function(){}},{key:"_wrap",value:function(a,b,c,d){var e=this,f=a[b],g=c(f),h=function(){try{return g.apply(this,arguments)}catch(a){if(e._reportError(a,d),!e.swallowExceptions)throw a}};a[b]=h}},{key:"_wrapCallback",value:function(a,b){var c=this;return function(){try{return a.apply(this,arguments)}catch(d){if(c._reportError(d,b),!c.swallowExceptions)throw d}}}},{key:"_reportError",value:function(a,b,c){var d=this,e=a&&(a.error||a);if(!e.__fedopsHandledError__){var f=Object.keys(this.listeners);f.forEach(function(a){d.listeners[a](e,b,c)}),e.__fedopsHandledError__=!0}}},{key:"_isErrorStatusCode",value:function(a){return a>=400||0===a}}]),a}();b["default"]=f}).call(b,c(25))},function(a,b){var c;c=function(){return this}();try{c=c||Function("return this")()||(1,eval)("this")}catch(d){"object"==typeof window&&(c=window)}a.exports=c},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});b.BI_BASE_URL="https://frog.wix.com/fed",b.SESSION_ID_STORAGE_KEY="fedops.logger.sessionId",b.DEFAULT_APP_VERSION="0.0.0"},function(a,b,c){function d(){window.fedops=window.fedops||{},window.fedops.apps=window.fedops.apps||{}}Object.defineProperty(b,"__esModule",{value:!0}),b.initiateApp=d},,function(a,b,c){var d=c(27),e=c(10);angular.module("fedops",[]),angular.module("fedops").provider("fedopsLogger",function(){return{setAppName:function(a){return this.appName=a,this},setAppId:function(a){return this.appId=a,this},setErrorHandlerToggle:function(a){return this.errorHandlerToggle=a,this},useNewRelic:function(){return this},setBaseUrl:function(a){return this.baseUrl=a,this},setDisableAutoLoadFinish:function(){this.disableAutoLoadFinish=!0},setNetworkAnalysis:function(){this.networkAnalysis=!0},$get:function(){return e.create(this.appName,{baseUrl:this.baseUrl,appId:this.appId,errorHandlerToggle:this.errorHandlerToggle,disableAutoLoadFinish:this.disableAutoLoadFinish,networkAnalysis:this.networkAnalysis})}}}).factory("fedopsLoggerFactory",function(){return{createWidget:function(a,b){return e.create(a,{isWidgetLogger:!0,disableAutoLoadFinish:b})}}}).config(function(){d.initiateApp()}).config(["$provide",function(a){a.decorator("$exceptionHandler",["$delegate","fedopsLogger",function(a,b){return function(c,d){b.errorHandlerToggle&&b.reportError(c,"angular-error"),a(c,d)}}])}]).run(["$injector","fedopsLogger",function(a,b){a.get("$$testability").whenStable(function(){b&&!b.isDisableAutoLoadFinish()&&b.appLoaded()})}])}])});